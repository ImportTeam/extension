import{s as x,E as J}from"./index-CtnQ7lw9.js";const z=o=>{let c;const u=new Set,l=(_,A)=>{const O=typeof _=="function"?_(c):_;if(!Object.is(O,c)){const T=c;c=A??(typeof O!="object"||O===null)?O:Object.assign({},c,O),u.forEach(C=>C(c,T))}},y=()=>c,S={setState:l,getState:y,getInitialState:()=>R,subscribe:_=>(u.add(_),()=>u.delete(_))},R=c=o(l,y,S);return S},rt=(o=>o?z(o):z);function nt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var D={exports:{}},r={};var W;function ot(){if(W)return r;W=1;var o=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),T=Symbol.iterator;function C(t){return t===null||typeof t!="object"?null:(t=T&&t[T]||t["@@iterator"],typeof t=="function"?t:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,P={};function h(t,e,s){this.props=t,this.context=e,this.refs=P,this.updater=s||j}h.prototype.isReactComponent={},h.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},h.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v(){}v.prototype=h.prototype;function g(t,e,s){this.props=t,this.context=e,this.refs=P,this.updater=s||j}var H=g.prototype=new v;H.constructor=g,f(H,h.prototype),H.isPureReactComponent=!0;var N=Array.isArray;function k(){}var m={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function Y(t,e,s){var n=s.ref;return{$$typeof:o,type:t,key:e,ref:n!==void 0?n:null,props:s}}function Q(t,e){return Y(t.type,e,t.props)}function L(t){return typeof t=="object"&&t!==null&&t.$$typeof===o}function Z(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var B=/\/+/g;function U(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Z(""+t.key):e.toString(36)}function F(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(k,k):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function b(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var E=!1;if(t===null)E=!0;else switch(a){case"bigint":case"string":case"number":E=!0;break;case"object":switch(t.$$typeof){case o:case c:E=!0;break;case A:return E=t._init,b(E(t._payload),e,s,n,i)}}if(E)return i=i(t),E=n===""?"."+U(t,0):n,N(i)?(s="",E!=null&&(s=E.replace(B,"$&/")+"/"),b(i,e,s,"",function(et){return et})):i!=null&&(L(i)&&(i=Q(i,s+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(B,"$&/")+"/")+E)),e.push(i)),1;E=0;var I=n===""?".":n+":";if(N(t))for(var d=0;d<t.length;d++)n=t[d],a=I+U(n,d),E+=b(n,e,s,a,i);else if(d=C(t),typeof d=="function")for(t=d.call(t),d=0;!(n=t.next()).done;)n=n.value,a=I+U(n,d++),E+=b(n,e,s,a,i);else if(a==="object"){if(typeof t.then=="function")return b(F(t),e,s,n,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return E}function $(t,e,s){if(t==null)return t;var n=[],i=0;return b(t,n,"","",function(a){return e.call(s,a,i++)}),n}function V(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var K=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},tt={map:$,forEach:function(t,e,s){$(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return $(t,function(){e++}),e},toArray:function(t){return $(t,function(e){return e})||[]},only:function(t){if(!L(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};return r.Activity=O,r.Children=tt,r.Component=h,r.Fragment=u,r.Profiler=y,r.PureComponent=g,r.StrictMode=l,r.Suspense=R,r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,r.__COMPILER_RUNTIME={__proto__:null,c:function(t){return m.H.useMemoCache(t)}},r.cache=function(t){return function(){return t.apply(null,arguments)}},r.cacheSignal=function(){return null},r.cloneElement=function(t,e,s){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=f({},t.props),i=t.key;if(e!=null)for(a in e.key!==void 0&&(i=""+e.key),e)!G.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(n[a]=e[a]);var a=arguments.length-2;if(a===1)n.children=s;else if(1<a){for(var E=Array(a),I=0;I<a;I++)E[I]=arguments[I+2];n.children=E}return Y(t.type,i,n)},r.createContext=function(t){return t={$$typeof:w,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:p,_context:t},t},r.createElement=function(t,e,s){var n,i={},a=null;if(e!=null)for(n in e.key!==void 0&&(a=""+e.key),e)G.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(i[n]=e[n]);var E=arguments.length-2;if(E===1)i.children=s;else if(1<E){for(var I=Array(E),d=0;d<E;d++)I[d]=arguments[d+2];i.children=I}if(t&&t.defaultProps)for(n in E=t.defaultProps,E)i[n]===void 0&&(i[n]=E[n]);return Y(t,a,i)},r.createRef=function(){return{current:null}},r.forwardRef=function(t){return{$$typeof:S,render:t}},r.isValidElement=L,r.lazy=function(t){return{$$typeof:A,_payload:{_status:-1,_result:t},_init:V}},r.memo=function(t,e){return{$$typeof:_,type:t,compare:e===void 0?null:e}},r.startTransition=function(t){var e=m.T,s={};m.T=s;try{var n=t(),i=m.S;i!==null&&i(s,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(k,K)}catch(a){K(a)}finally{e!==null&&s.types!==null&&(e.types=s.types),m.T=e}},r.unstable_useCacheRefresh=function(){return m.H.useCacheRefresh()},r.use=function(t){return m.H.use(t)},r.useActionState=function(t,e,s){return m.H.useActionState(t,e,s)},r.useCallback=function(t,e){return m.H.useCallback(t,e)},r.useContext=function(t){return m.H.useContext(t)},r.useDebugValue=function(){},r.useDeferredValue=function(t,e){return m.H.useDeferredValue(t,e)},r.useEffect=function(t,e){return m.H.useEffect(t,e)},r.useEffectEvent=function(t){return m.H.useEffectEvent(t)},r.useId=function(){return m.H.useId()},r.useImperativeHandle=function(t,e,s){return m.H.useImperativeHandle(t,e,s)},r.useInsertionEffect=function(t,e){return m.H.useInsertionEffect(t,e)},r.useLayoutEffect=function(t,e){return m.H.useLayoutEffect(t,e)},r.useMemo=function(t,e){return m.H.useMemo(t,e)},r.useOptimistic=function(t,e){return m.H.useOptimistic(t,e)},r.useReducer=function(t,e,s){return m.H.useReducer(t,e,s)},r.useRef=function(t){return m.H.useRef(t)},r.useState=function(t){return m.H.useState(t)},r.useSyncExternalStore=function(t,e,s){return m.H.useSyncExternalStore(t,e,s)},r.useTransition=function(){return m.H.useTransition()},r.version="19.2.0",r}var X;function st(){return X||(X=1,D.exports=ot()),D.exports}var ut=st();const M=nt(ut),it=o=>o;function ct(o,c=it){const u=M.useSyncExternalStore(o.subscribe,M.useCallback(()=>c(o.getState()),[o,c]),M.useCallback(()=>c(o.getInitialState()),[o,c]));return M.useDebugValue(u),u}const at=o=>{const c=rt(o),u=l=>ct(c,l);return Object.assign(u,c),u},Et=(o=>at);function ft(o,c){let u;try{u=o()}catch{return}return{getItem:y=>{var p;const w=R=>R===null?null:JSON.parse(R,void 0),S=(p=u.getItem(y))!=null?p:null;return S instanceof Promise?S.then(w):w(S)},setItem:(y,p)=>u.setItem(y,JSON.stringify(p,void 0)),removeItem:y=>u.removeItem(y)}}const q=o=>c=>{try{const u=o(c);return u instanceof Promise?u:{then(l){return q(l)(u)},catch(l){return this}}}catch(u){return{then(l){return this},catch(l){return q(l)(u)}}}},lt=(o,c)=>(u,l,y)=>{let p={storage:ft(()=>localStorage),partialize:f=>f,version:0,merge:(f,P)=>({...P,...f}),...c},w=!1;const S=new Set,R=new Set;let _=p.storage;if(!_)return o((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),u(...f)},l,y);const A=()=>{const f=p.partialize({...l()});return _.setItem(p.name,{state:f,version:p.version})},O=y.setState;y.setState=(f,P)=>(O(f,P),A());const T=o((...f)=>(u(...f),A()),l,y);y.getInitialState=()=>T;let C;const j=()=>{var f,P;if(!_)return;w=!1,S.forEach(v=>{var g;return v((g=l())!=null?g:T)});const h=((P=p.onRehydrateStorage)==null?void 0:P.call(p,(f=l())!=null?f:T))||void 0;return q(_.getItem.bind(_))(p.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==p.version){if(p.migrate){const g=p.migrate(v.state,v.version);return g instanceof Promise?g.then(H=>[!0,H]):[!0,g]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var g;const[H,N]=v;if(C=p.merge(N,(g=l())!=null?g:T),u(C,!0),H)return A()}).then(()=>{h?.(C,void 0),C=l(),w=!0,R.forEach(v=>v(C))}).catch(v=>{h?.(void 0,v)})};return y.persist={setOptions:f=>{p={...p,...f},f.storage&&(_=f.storage)},clearStorage:()=>{_?.removeItem(p.name)},getOptions:()=>p,rehydrate:()=>j(),hasHydrated:()=>w,onHydrate:f=>(S.add(f),()=>{S.delete(f)}),onFinishHydration:f=>(R.add(f),()=>{R.delete(f)})},p.skipHydration||j(),C||T},yt=lt,pt={getItem:async o=>new Promise(c=>{chrome.storage.local.get([o],u=>{if(chrome.runtime.lastError){x.warn("chromeStorage getItem failed",{key:o,error:chrome.runtime.lastError.message}),c(null);return}c(u[o]??null)})}),setItem:async(o,c)=>new Promise((u,l)=>{chrome.storage.local.set({[o]:c},()=>{if(chrome.runtime.lastError){const y=new Error(`chromeStorage setItem failed: ${chrome.runtime.lastError.message}`);x.error(J.STO_E001,"chromeStorage setItem failed",{data:{key:o},error:y}),l(new Error(chrome.runtime.lastError.message??"Failed to save to storage"));return}u()})}),removeItem:async o=>new Promise((c,u)=>{chrome.storage.local.remove([o],()=>{if(chrome.runtime.lastError){const l=new Error(`chromeStorage removeItem failed: ${chrome.runtime.lastError.message}`);x.error(J.STO_E001,"chromeStorage removeItem failed",{data:{key:o},error:l}),u(new Error(chrome.runtime.lastError.message??"Failed to remove from storage"));return}c()})})};function _t(){return pt}const vt={RECOMMENDATION:"picsel-recommendation",SUBPOPUP:"subpopup-store",SETTINGS:"picsel-settings"},dt=1800*1e3;export{dt as M,M as R,vt as S,_t as a,st as b,Et as c,nt as g,yt as p,ut as r};
