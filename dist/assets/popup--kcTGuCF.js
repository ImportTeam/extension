import{j as t,r as f,R as k,a as w}from"./client-5jyeqxZ7.js";import{c as y,a as B,p as C}from"./middleware-C2IU-WCn.js";import{W as c}from"./constants-4DKqSpZt.js";/* empty css                */const P=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z=y("settings",P);const R=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],I=y("x",R),W={getItem:async e=>new Promise(n=>{chrome.storage.local.get([e],o=>{n(o[e]??null)})}),setItem:async(e,n)=>new Promise(o=>{chrome.storage.local.set({[e]:n},()=>{o()})}),removeItem:async e=>new Promise(n=>{chrome.storage.local.remove([e],()=>{n()})})},l=B()(C(e=>({isLoading:!1,isExpanded:!1,showPaymentMethod:!1,selectedTab:"recommendation",error:null,recommendation:null,alternatives:[],discounts:null,cardBenefits:null,timestamp:0,siteId:void 0,setLoading:n=>{e({isLoading:n})},setRecommendation:n=>{e({recommendation:n,timestamp:Date.now(),error:null})},setAlternatives:n=>{e({alternatives:n})},setDiscounts:n=>{e({discounts:n})},setCardBenefits:n=>{e({cardBenefits:n})},toggleExpanded:()=>{e(n=>({isExpanded:!n.isExpanded}))},setSelectedTab:n=>{e({selectedTab:n})},setShowPaymentMethod:n=>{e({showPaymentMethod:n})},setError:n=>{e({error:n})},reset:()=>{e({isLoading:!1,isExpanded:!1,showPaymentMethod:!1,selectedTab:"recommendation",error:null,recommendation:null,alternatives:[],discounts:null,cardBenefits:null,timestamp:0,siteId:void 0})}}),{name:"picsel-recommendation",storage:W,partialize:e=>({recommendation:e.recommendation,alternatives:e.alternatives,discounts:e.discounts,cardBenefits:e.cardBenefits,siteId:e.siteId,timestamp:e.timestamp}),onRehydrateStorage:()=>e=>{if(e&&e.timestamp){const n=Date.now()-e.timestamp,o=1800*1e3;n>o&&(e.recommendation=null,e.alternatives=[],e.discounts=null,e.cardBenefits=null)}}})),m=()=>l(e=>e.recommendation),M=()=>l(e=>e.alternatives),g=()=>l(e=>e.isLoading),T=()=>l(e=>e.isExpanded),H=()=>l(e=>e.selectedTab),L=()=>l(e=>e.error),E=()=>l(e=>e.discounts),A=()=>l(e=>e.cardBenefits),D=()=>{const e=m(),n=g();return!e&&!n},N=()=>{const e=m(),n=g();return!!e&&!n},u=()=>l(e=>({setLoading:e.setLoading,setRecommendation:e.setRecommendation,setAlternatives:e.setAlternatives,setDiscounts:e.setDiscounts,setCardBenefits:e.setCardBenefits,toggleExpanded:e.toggleExpanded,setSelectedTab:e.setSelectedTab,setShowPaymentMethod:e.setShowPaymentMethod,setError:e.setError,reset:e.reset})),p={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:"16px 0"},card:{padding:"24px 20px",background:"#ffffff",borderRadius:"20px",border:"1px solid #e5e7eb",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02)",textAlign:"center",maxWidth:"260px",width:"100%",transition:"transform 0.2s ease, box-shadow 0.2s ease"},label:{fontSize:"12px",color:"#9ca3af",marginBottom:"6px",fontWeight:"500",letterSpacing:"0.3px"},amount:{fontSize:"36px",fontWeight:"900",color:"#111827",margin:"0 0 6px 0",lineHeight:"1.1",letterSpacing:"-1.5px"},text:{fontSize:"13px",color:"#6b7280",margin:"0",fontWeight:"500"}},O=()=>t.jsx("div",{style:p.container,children:t.jsxs("div",{style:p.card,children:[t.jsx("div",{style:p.label,children:t.jsx("span",{children:"ì´ë²ˆë‹¬"})}),t.jsx("div",{style:p.amount,children:"â‚©123,456"}),t.jsx("p",{style:p.text,children:"ì ˆì•½í–ˆì–´ìš”"})]})}),U=()=>{const e=M(),{setRecommendation:n}=u();return!e||e.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"ì¶”ê°€ ì˜µì…˜ì´ ì—†ìŠµë‹ˆë‹¤."}):t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3",children:"ë‹¤ë¥¸ ê²°ì œ ìˆ˜ë‹¨"}),t.jsx("div",{className:"space-y-2",children:e.map(o=>t.jsxs("button",{onClick:()=>n(o),className:`
              w-full p-3 rounded-md
              bg-white dark:bg-gray-700
              border border-gray-200 dark:border-gray-600
              hover:border-primary dark:hover:border-primary
              transition-all
              text-left
            `,children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:o.name}),o.hasInstallment&&o.installmentInfo&&t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:o.installmentInfo})]}),t.jsxs("p",{className:"font-semibold text-success text-sm",children:["â‚©",o.savingAmount.toLocaleString()]})]}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:["ìˆ˜ìˆ˜ë£Œ: ",o.fee,"%",o.baseFee>o.fee&&t.jsxs("span",{className:"text-success ml-1",children:["(vs ",o.baseFee,"%)"]})]})]},o.id))})]})},F=e=>!e||e.length===0?null:t.jsxs("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"#fef3c7",borderRadius:"6px"},children:[t.jsx("p",{style:{fontSize:"12px",fontWeight:"bold",color:"#92400e",margin:"0 0 8px 0"},children:"ðŸ’° ì¶”ê°€ í• ì¸ ì •ë³´"}),e.map((n,o)=>t.jsxs("div",{style:{fontSize:"12px",color:"#78350f",marginBottom:o<e.length-1?"4px":"0"},children:["â€¢ ",n.type,": ",n.rate,"% í• ì¸"]},o))]}),_=e=>!e||e.length===0?null:t.jsxs("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"#fce7f3",borderRadius:"6px"},children:[t.jsx("p",{style:{fontSize:"12px",fontWeight:"bold",color:"#831843",margin:"0 0 8px 0"},children:"ðŸŽ ì¹´ë“œ í˜œíƒ"}),e.map((n,o)=>t.jsxs("div",{style:{fontSize:"12px",color:"#9f1239",marginBottom:o<e.length-1?"4px":"0"},children:["â€¢ ",n.card,": ",n.benefit]},o))]}),$=()=>t.jsx("button",{style:{width:"100%",padding:"12px",backgroundColor:"#4f46e5",color:"#ffffff",fontSize:"14px",fontWeight:"bold",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#4338ca",onMouseOut:e=>e.currentTarget.style.backgroundColor="#4f46e5",onClick:()=>window.close(),children:"ì´ ê²°ì œ ìˆ˜ë‹¨ìœ¼ë¡œ ê²°ì œí•˜ê¸°"}),V=()=>{const e=m(),n=T(),o=E(),d=A(),{toggleExpanded:x}=u();return e?t.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden",marginBottom:"0"},children:[t.jsxs("div",{style:{padding:"12px"},children:[t.jsx("div",{style:{marginBottom:"12px"},children:t.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",margin:"0",color:"#000"},children:e.name})}),t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsxs("div",{style:{fontSize:"clamp(20px, 8vw, 28px)",fontWeight:"bold",color:"#10b981",margin:"0 0 4px 0"},children:["â‚©",e.savingAmount.toLocaleString()," ì ˆì•½"]}),t.jsx("p",{style:{fontSize:"clamp(10px, 3vw, 12px)",color:"#666",margin:"0"},children:"ì´ ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ ì‹œ ì ˆì•½ ê°€ëŠ¥"})]}),t.jsx("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px"},children:t.jsxs("p",{style:{fontSize:"12px",color:"#555",margin:"0"},children:["ìˆ˜ìˆ˜ë£Œ:",t.jsxs("span",{style:{fontWeight:"bold",marginLeft:"4px"},children:[e.fee,"%"]})," vs ",t.jsxs("span",{style:{fontWeight:"bold",marginLeft:"4px"},children:[e.baseFee,"%"]})]})}),e.confidence>=.95&&t.jsx("div",{style:{marginBottom:"12px",fontSize:"12px",color:"#10b981",fontWeight:"bold"},children:"âœ“ ë†’ì€ ì‹ ë¢°ë„ ì¶”ì²œ"}),e.hasInstallment&&e.installmentInfo&&t.jsx("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#eff6ff",borderRadius:"6px",fontSize:"12px",color:"#0284c7"},children:e.installmentInfo}),F(o),_(d),$()]}),n&&t.jsx("div",{style:{borderTop:"1px solid #e5e7eb"},children:t.jsx(U,{})}),t.jsx("button",{onClick:x,style:{width:"100%",padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"bold",color:"#4f46e5",backgroundColor:"#f9fafb",border:"none",cursor:"pointer",borderTop:"1px solid #e5e7eb"},onMouseOver:s=>s.currentTarget.style.backgroundColor="#f3f4f6",onMouseOut:s=>s.currentTarget.style.backgroundColor="#f9fafb",children:n?"ì˜µì…˜ ìˆ¨ê¸°ê¸°":"ë‹¤ë¥¸ ì˜µì…˜ ë³´ê¸°"})]}):t.jsx("div",{style:{padding:"16px",textAlign:"center",color:"#999"},children:"ì¶”ì²œí•  ê²°ì œ ìˆ˜ë‹¨ì´ ì—†ìŠµë‹ˆë‹¤."})},X=()=>{const e=m();return e?t.jsxs("div",{style:{padding:"12px"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"13px",fontWeight:"bold",margin:"0 0 12px 0"},children:"ìˆ˜ìˆ˜ë£Œ ëª…ì„¸"}),t.jsxs("div",{style:{backgroundColor:"#f9fafb",borderRadius:"6px",padding:"12px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px"},children:[t.jsxs("span",{children:[e.name," ìˆ˜ìˆ˜ë£Œ:"]}),t.jsxs("span",{style:{fontWeight:"bold"},children:[e.fee,"%"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px"},children:[t.jsx("span",{children:"ê¸°ì¤€ ìˆ˜ìˆ˜ë£Œ:"}),t.jsxs("span",{style:{fontWeight:"bold"},children:[e.baseFee,"%"]})]}),t.jsx("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"8px",marginTop:"8px"},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px"},children:[t.jsx("span",{style:{fontWeight:"bold",color:"#10b981"},children:"ì ˆì•½ì•¡:"}),t.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:["â‚©",e.savingAmount.toLocaleString()]})]})})]})]}),e.hasInstallment&&e.installmentInfo&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h3",{style:{fontSize:"13px",fontWeight:"bold",margin:"0 0 12px 0"},children:"í• ë¶€ ì •ë³´"}),t.jsx("div",{style:{backgroundColor:"#eff6ff",borderRadius:"6px",padding:"12px",fontSize:"12px",color:"#0284c7"},children:e.installmentInfo})]}),e.confidence>=.95&&t.jsxs("div",{children:[t.jsx("h3",{style:{fontSize:"13px",fontWeight:"bold",margin:"0 0 12px 0"},children:"ì¶”ì²œ ì‹ ë¢°ë„"}),t.jsxs("div",{style:{fontSize:"12px",color:"#10b981"},children:["âœ“ ",Math.round(e.confidence*100),"% ì‹ ë¢°ë„"]})]})]}):null},G=()=>{const e=H(),{setSelectedTab:n}=u();return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>n("recommendation"),style:{flex:1,padding:"8px 12px",fontSize:"12px",fontWeight:"bold",borderRadius:"6px",border:"none",backgroundColor:e==="recommendation"?"#4f46e5":"#f3f4f6",color:e==="recommendation"?"#ffffff":"#374151",cursor:"pointer",transition:"all 0.2s ease"},children:"ì¶”ì²œ"}),t.jsx("button",{onClick:()=>n("settings"),style:{flex:1,padding:"8px 12px",fontSize:"12px",fontWeight:"bold",borderRadius:"6px",border:"none",backgroundColor:e==="settings"?"#4f46e5":"#f3f4f6",color:e==="settings"?"#ffffff":"#374151",cursor:"pointer",transition:"all 0.2s ease"},children:"ìƒì„¸ì •ë³´"})]}),e==="recommendation"&&t.jsx(V,{}),e==="settings"&&t.jsx(X,{})]})},Y={light:{background:"#ffffff",backgroundSecondary:"#f9fafb",buttonDark:"#4f46e5",textPrimary:"#111827",textSecondary:"#4b5563",textTertiary:"#9ca3af",buttonHover:"#4338ca"}},i=Y.light,a={container:{display:"flex",flexDirection:"column",gap:"12px",padding:"16px 20px 20px 20px",backgroundColor:i.background,borderTop:"none",flexShrink:0},primaryButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"52px",border:"none",borderRadius:"16px",backgroundColor:i.buttonDark,color:"#ffffff",fontSize:"15px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 8px rgba(79, 70, 229, 0.15), 0 1px 2px rgba(79, 70, 229, 0.1)"},primaryButtonHover:{backgroundColor:i.buttonHover,transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(79, 70, 229, 0.2), 0 2px 4px rgba(79, 70, 229, 0.15)"},secondaryButton:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"40px",border:"none",borderRadius:"0",backgroundColor:"transparent",color:"#9ca3af",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"color 0.2s ease"},secondaryButtonHover:{color:"#6b7280"}},q=()=>{const e=()=>{chrome.windows.create({url:chrome.runtime.getURL("src/subpopup/index.html"),type:"popup",width:480,height:640})},n=()=>{chrome.tabs.create({url:"https://picsel.io/dashboard",active:!1})},[o,d]=f.useState(!1),[x,s]=f.useState(!1);return t.jsxs("div",{style:a.container,children:[t.jsx("button",{onClick:e,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:o?{...a.primaryButton,...a.primaryButtonHover}:a.primaryButton,children:"íŒì—…ìœ¼ë¡œ ë„ìš°ê¸°"}),t.jsx("button",{onClick:n,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),style:x?{...a.secondaryButton,...a.secondaryButtonHover}:a.secondaryButton,children:"ë‚´ PicSelë¡œ ê°€ê¸°"})]})},r={container:{width:"100%",minWidth:`${c.POPUP.minWidth}px`,maxWidth:`${c.POPUP.maxWidth}px`,minHeight:`${c.POPUP.idleHeight}px`,display:"flex",flexDirection:"column",backgroundColor:"#f5f5f7",color:i.textPrimary,fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',overflow:"hidden",boxSizing:"border-box",border:"1px solid #d1d5db",borderRadius:"12px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",backgroundColor:"#ffffff",flexShrink:0,zIndex:10,borderBottom:"1px solid #e5e7eb"},logoContainer:{display:"flex",alignItems:"center",gap:"10px"},logo:{height:"24px",width:"auto",objectFit:"contain"},title:{fontSize:"18px",fontWeight:"800",margin:"0",color:i.textPrimary,letterSpacing:"-0.5px"},iconButton:{background:"none",border:"none",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:i.textTertiary,borderRadius:"8px",transition:"all 0.2s ease"},iconButtonHover:{backgroundColor:i.backgroundSecondary,color:i.textPrimary},content:{flex:1,padding:"0 20px",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},loading:{textAlign:"center",padding:"40px 0",color:i.textSecondary,fontSize:"14px"},error:{padding:"16px",backgroundColor:"#fef2f2",borderRadius:"12px",border:"1px solid #fee2e2",margin:"16px 0"},errorText:{color:"#b91c1c",margin:"0",fontSize:"13px",lineHeight:"1.5",fontWeight:"500"}},J=()=>{const e=g(),n=L(),o=D(),d=N(),[x,s]=f.useState(!1),[j,h]=f.useState(!1),v=o?c.POPUP.idleHeight:c.POPUP.expandedHeight,S=()=>{chrome.windows.create({url:chrome.runtime.getURL("src/subpopup/index.html"),type:"popup",width:c.SUBPOPUP.width,height:c.SUBPOPUP.height})};return t.jsxs("div",{style:{...r.container,height:`${v}px`,flex:"0 0 auto"},children:[t.jsxs("div",{style:r.header,children:[t.jsxs("div",{style:r.logoContainer,children:[t.jsx("img",{src:"/assets/icon/picsel.png",alt:"PicSel",style:r.logo}),t.jsx("h1",{style:r.title,children:"PicSel"})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:S,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),style:x?{...r.iconButton,...r.iconButtonHover}:r.iconButton,title:"ê²°ì œ ìˆ˜ë‹¨ ì„¤ì •",children:t.jsx(z,{size:20,strokeWidth:2.5})}),t.jsx("button",{onClick:()=>window.close(),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:j?{...r.iconButton,...r.iconButtonHover}:r.iconButton,title:"ë‹«ê¸°",children:t.jsx(I,{size:20,strokeWidth:2.5})})]})]}),t.jsxs("div",{style:r.content,children:[e&&t.jsx("div",{style:r.loading,children:t.jsx("p",{children:"ë¡œë”© ì¤‘..."})}),n&&!e&&t.jsx("div",{style:r.error,children:t.jsx("p",{style:r.errorText,children:n})}),o&&t.jsx(O,{}),d&&t.jsx(G,{}),!o&&!d&&!e&&!n&&t.jsx("div",{style:r.loading,children:t.jsx("p",{children:"ì´ˆê¸°í™” ì¤‘..."})})]}),t.jsx(q,{})]})},b=document.getElementById("root");b&&k.createRoot(b).render(t.jsx(w.StrictMode,{children:t.jsx(J,{})}));
