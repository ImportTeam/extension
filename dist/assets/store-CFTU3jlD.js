import{c as s,p as i,a,S as c}from"./chromeStorage-8YJmZKR_.js";import{s as r,E as n}from"./index-CtnQ7lw9.js";const t={displayMode:"card-benefits",autoFetchLowestPrice:!1,comparisonServerUrl:"http://localhost:8000"},S=s()(i(o=>({...t,setDisplayMode:e=>{r.info("Display mode changed",{mode:e}),o({displayMode:e})},setAutoFetchLowestPrice:e=>{r.info("Auto fetch lowest price changed",{enabled:e}),o({autoFetchLowestPrice:e})},setComparisonServerUrl:e=>{r.info("Comparison server URL changed",{url:e}),o({comparisonServerUrl:e})},reset:()=>{r.info("Settings reset to defaults"),o(t)}}),{name:c.SETTINGS,storage:a(),partialize:o=>({displayMode:o.displayMode,autoFetchLowestPrice:o.autoFetchLowestPrice,comparisonServerUrl:o.comparisonServerUrl}),onRehydrateStorage:()=>(o,e)=>{if(e){r.error(n.STO_E003,"Settings rehydration failed",{error:e instanceof Error?e:new Error(String(e))});return}o&&r.debug("Settings rehydrated",{displayMode:o.displayMode,autoFetchLowestPrice:o.autoFetchLowestPrice})}}));export{S as u};
