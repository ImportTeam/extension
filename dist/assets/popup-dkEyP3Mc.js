import{r as l,j as e,c as P,R as $}from"./global-DY6UYS84.js";import{p as D}from"./logger-DEAfARFT.js";const u=l.forwardRef(({className:s="",variant:t="default",size:a="default",...r},c)=>{const m="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",d={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},v={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"};return e.jsx("button",{className:`${m} ${d[t]} ${v[a]} ${s}`,ref:c,...r})});u.displayName="Button";const h=l.forwardRef(({className:s="",...t},a)=>e.jsx("div",{ref:a,className:`rounded-lg border bg-card text-card-foreground shadow-sm ${s}`,...t}));h.displayName="Card";const f=l.forwardRef(({className:s="",...t},a)=>e.jsx("div",{ref:a,className:`flex flex-col space-y-1.5 p-6 ${s}`,...t}));f.displayName="CardHeader";const g=l.forwardRef(({className:s="",...t},a)=>e.jsx("h3",{ref:a,className:`text-2xl font-semibold leading-none tracking-tight ${s}`,...t}));g.displayName="CardTitle";const j=l.forwardRef(({className:s="",...t},a)=>e.jsx("p",{ref:a,className:`text-sm text-muted-foreground ${s}`,...t}));j.displayName="CardDescription";const p=l.forwardRef(({className:s="",...t},a)=>e.jsx("div",{ref:a,className:`p-6 pt-0 ${s}`,...t}));p.displayName="CardContent";const T=l.forwardRef(({className:s="",...t},a)=>e.jsx("div",{ref:a,className:`flex items-center p-6 pt-0 ${s}`,...t}));T.displayName="CardFooter";const M=l.forwardRef(({className:s="",type:t,...a},r)=>e.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${s}`,ref:r,...a}));M.displayName="Input";const E=()=>{const[s,t]=l.useState(!1);l.useEffect(()=>{const r=localStorage.getItem("theme"),c=window.matchMedia("(prefers-color-scheme: dark)").matches,m=r==="dark"||!r&&c;t(m),document.documentElement.classList.toggle("dark",m)},[]);const a=()=>{const r=!s;t(r),document.documentElement.classList.toggle("dark",r),localStorage.setItem("theme",r?"dark":"light")};return e.jsx(u,{variant:"ghost",size:"icon",onClick:a,"aria-label":"Toggle theme",children:s?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})},C=({pixelSize:s=4,gridSize:t=4,animated:a=!1,variant:r="primary",className:c=""})=>{const m=t*t,d=x=>{if(r==="gradient"){const n=Math.floor(x/t),y=x%t,o=Math.sqrt(Math.pow(n-t/2,2)+Math.pow(y-t/2,2)),b=Math.sqrt(2)*t/2;return`bg-picsel-${900-Math.floor(o/b*400)}`}return r==="primary"?"bg-picsel-500":r==="accent"?"bg-pixel-500":"bg-picsel-300"},v=x=>{const n=Math.floor(x/t),y=x%t,o=(t-1)/2,b=(t-1)/2;return Math.sqrt(Math.pow(n-o,2)+Math.pow(y-b,2))*.1},N=l.useMemo(()=>Array.from({length:m},(x,n)=>({id:n,color:d(n),delay:a?v(n):0})),[t,r,a]);return e.jsx("div",{className:`inline-grid gap-[1px] ${c}`,style:{gridTemplateColumns:`repeat(${t}, ${s}px)`,gridTemplateRows:`repeat(${t}, ${s}px)`},children:N.map(x=>e.jsx("div",{className:`${x.color} ${a?"animate-pixel-pulse":""}`,style:a?{animationDelay:`${x.delay}s`}:void 0},x.id))})},B=({variant:s="primary",className:t=""})=>e.jsx(C,{pixelSize:3,gridSize:4,variant:s,className:t}),A={sm:{pixelSize:3,gridSize:4},md:{pixelSize:4,gridSize:4},lg:{pixelSize:6,gridSize:4}},I=({message:s,size:t="md",fullScreen:a=!1,className:r=""})=>{const{pixelSize:c,gridSize:m}=A[t],d=e.jsxs("div",{className:`flex flex-col items-center gap-4 ${r}`,children:[e.jsx(C,{pixelSize:c,gridSize:m,variant:"accent",animated:!0}),s&&e.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:s})]});return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:d}):d},w={async get(s=null){return new Promise((t,a)=>{try{chrome.storage.local.get(s,r=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t(r)})}catch(r){a(r)}})},async set(s){return new Promise((t,a)=>{try{chrome.storage.local.set(s,()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t()})}catch(r){a(r)}})},async remove(s){return new Promise((t,a)=>{try{chrome.storage.local.remove(s,()=>{chrome.runtime.lastError?a(chrome.runtime.lastError):t()})}catch(r){a(r)}})},async clear(){return new Promise((s,t)=>{try{chrome.storage.local.clear(()=>{chrome.runtime.lastError?t(chrome.runtime.lastError):s()})}catch(a){t(a)}})},async getSettings(){return(await this.get("settings")).settings||{theme:"system",language:"ko",notifications:!0,autoDetect:!0,savingsAlerts:!0,dataSync:!1}},async setSettings(s){const t=await this.getSettings();await this.set({settings:{...t,...s}})},async getPaymentMethods(){return(await this.get("paymentMethods")).paymentMethods||[]},async addPaymentMethod(s){const t=await this.getPaymentMethods(),a={...s,id:`pm_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now()};return a.primary&&t.forEach(r=>r.primary=!1),t.push(a),await this.set({paymentMethods:t}),a},async updatePaymentMethod(s,t){const a=await this.getPaymentMethods(),r=a.findIndex(c=>c.id===s);if(r===-1)throw new Error(`Payment method with id ${s} not found`);t.primary&&a.forEach(c=>c.primary=!1),a[r]={...a[r],...t,updatedAt:Date.now()},await this.set({paymentMethods:a})},async deletePaymentMethod(s){const a=(await this.getPaymentMethods()).filter(r=>r.id!==s);await this.set({paymentMethods:a})},async getTransactions(){return(await this.get("transactions")).transactions||[]},async addTransaction(s){const t=await this.getTransactions(),a={...s,id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:Date.now()};return t.unshift(a),await this.set({transactions:t}),a},async getUserProfile(){return(await this.get("userProfile")).userProfile||null},async setUserProfile(s){const t=await this.getUserProfile(),a=t?{...t,...s,updatedAt:Date.now()}:{...s,createdAt:Date.now()};await this.set({userProfile:a})}},S=()=>{const[s,t]=l.useState([]),[a,r]=l.useState([]),[c,m]=l.useState(!0);l.useEffect(()=>{d()},[]);const d=async()=>{try{const[o,b]=await Promise.all([w.getPaymentMethods(),w.getTransactions()]);t(o),r(b)}catch(o){console.error("Failed to load dashboard data:",o)}finally{m(!1)}};if(c)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(I,{message:"ë°ì´í„° ë¡œë”© ì¤‘...",size:"lg"})});const v=s.slice(0,3),N=a.slice(0,5),x=a.filter(o=>{const b=new Date(o.date),i=new Date;return b.getMonth()===i.getMonth()&&b.getFullYear()===i.getFullYear()}),n=x.reduce((o,b)=>b.savings+o,0),y=o=>{switch(o){case"card":return"ðŸ’³";case"bank":return"ðŸ¦";case"mobile":return"ðŸ’°"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{className:"bg-gradient-to-br from-savings-500 to-savings-600 border-0 shadow-xl hover:shadow-2xl transition-shadow duration-300",children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-white/90 mb-2",children:"ì´ë²ˆ ë‹¬ ì ˆì•½ ê¸ˆì•¡"}),e.jsxs("h2",{className:"text-5xl font-bold text-white leading-tight mb-1",children:["â‚©",n.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-white/70",children:[x.length,"ê±´ì˜ ê±°ëž˜"]})]}),e.jsx("div",{className:"text-7xl opacity-20 select-none",children:"ðŸ’°"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(h,{className:"bg-gradient-to-br from-picsel-600 to-picsel-700 border-0 shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5",children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-white/80 mb-0.5",children:"ê²°ì œìˆ˜ë‹¨"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.length,"ê°œ"]})]})]})})}),e.jsx(h,{className:"bg-gradient-to-br from-pixel-500 to-pixel-600 border-0 shadow-md hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5",children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-white/80 mb-0.5",children:"ì´ë²ˆ ë‹¬"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:[x.length,"ê±´"]})]})]})})})]})]}),e.jsxs(h,{className:"border-picsel-200 dark:border-picsel-700 shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx(f,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g,{className:"text-xl font-semibold text-foreground",children:"ì¦ê²¨ì°¾ëŠ” ê²°ì œìˆ˜ë‹¨"}),e.jsx(j,{className:"mt-1",children:"ìžì£¼ ì‚¬ìš©í•˜ëŠ” ê²°ì œ ë°©ë²•"})]}),e.jsxs("button",{className:"text-pixel-600 hover:text-pixel-700 text-sm font-medium flex items-center gap-1 transition-colors",children:["ì „ì²´ë³´ê¸°",e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),e.jsx(p,{className:"space-y-2",children:v.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-30",children:"ðŸ’³"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ë“±ë¡ëœ ê²°ì œìˆ˜ë‹¨ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-pixel-500 text-white text-sm font-medium rounded-lg hover:bg-pixel-600 transition-colors",children:"ê²°ì œìˆ˜ë‹¨ ì¶”ê°€"})]}):v.map(o=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border border-picsel-200 dark:border-picsel-700 hover:bg-pixel-50/30 dark:hover:bg-pixel-900/20 hover:border-pixel-300 dark:hover:border-pixel-700 hover:shadow-sm transition-all duration-200 cursor-pointer group",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-picsel-500 to-picsel-600 flex items-center justify-center text-2xl shadow-sm group-hover:scale-105 transition-transform duration-200",children:y(o.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("p",{className:"font-semibold text-base text-foreground group-hover:text-pixel-600 dark:group-hover:text-pixel-400 transition-colors truncate",children:o.name}),o.primary&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-pixel-500 text-white shadow-sm",children:"ì£¼"})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:o.number})]}),e.jsx("svg",{className:"w-5 h-5 text-muted-foreground group-hover:text-pixel-600 group-hover:translate-x-1 transition-all flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},o.id))})]}),e.jsxs(h,{className:"border-picsel-200 dark:border-picsel-700 shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx(f,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(g,{className:"text-xl font-semibold text-foreground",children:"ìµœê·¼ ê±°ëž˜ ë‚´ì—­"}),e.jsx(j,{className:"mt-1",children:"ìµœê·¼ 5ê±´ì˜ ê±°ëž˜"})]}),e.jsxs("button",{className:"text-pixel-600 hover:text-pixel-700 text-sm font-medium flex items-center gap-1 transition-colors",children:["ì „ì²´ë³´ê¸°",e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),e.jsx(p,{className:"space-y-1",children:N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-30",children:"ðŸ“Š"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ê±°ëž˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤"})]}):N.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-picsel-50/50 dark:hover:bg-picsel-800/30 transition-all duration-200 cursor-pointer group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-base text-foreground group-hover:text-pixel-600 dark:group-hover:text-pixel-400 transition-colors truncate",children:o.store}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:o.date})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[e.jsxs("p",{className:"font-bold text-base text-foreground",children:["â‚©",o.amount.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-savings-600 dark:text-savings-400 font-medium mt-0.5",children:["ì ˆì•½ â‚©",o.savings.toLocaleString()]})]})]},o.id))})]})]})},z=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0);l.useEffect(()=>{c()},[]);const c=async()=>{try{const n=await w.getPaymentMethods();t(n),n.length===0&&await m()}catch(n){console.error("Failed to load payment methods:",n)}finally{r(!1)}},m=async()=>{const n=[{type:"card",name:"KBêµ­ë¯¼ì¹´ë“œ",number:"**** 1234",primary:!0},{type:"mobile",name:"Toss Money",number:"â‚©125,000",primary:!1},{type:"card",name:"ì‹ í•œì¹´ë“œ",number:"**** 5678",primary:!1},{type:"bank",name:"ìš°ë¦¬ì€í–‰",number:"**** 9012",primary:!1}];for(const y of n)await w.addPaymentMethod(y);await c()},d=n=>{switch(n){case"card":return"ðŸ’³";case"bank":return"ðŸ¦";case"mobile":return"ðŸ’°"}},v=n=>{switch(n){case"card":return"ì‹ ìš©/ì²´í¬ì¹´ë“œ";case"bank":return"ê³„ì¢Œ";case"mobile":return"ê°„íŽ¸ê²°ì œ"}},N=async n=>{try{await w.updatePaymentMethod(n,{primary:!0}),await c()}catch(y){console.error("Failed to set primary:",y)}},x=async n=>{try{await w.deletePaymentMethod(n),await c()}catch(y){console.error("Failed to delete method:",y)}};return a?e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"ê²°ì œ ìˆ˜ë‹¨ ê´€ë¦¬"}),e.jsx("p",{className:"text-muted-foreground",children:"ë“±ë¡ëœ ê²°ì œ ìˆ˜ë‹¨ì„ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs(u,{children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"ê²°ì œìˆ˜ë‹¨ ì¶”ê°€"]})]}),e.jsx("div",{className:"grid gap-4",children:s.map(n=>e.jsxs(h,{children:[e.jsx(f,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-3xl",children:d(n.type)}),e.jsxs("div",{children:[e.jsx(g,{className:"text-lg",children:n.name}),e.jsxs(j,{children:[v(n.type)," â€¢ ",n.number]})]})]}),n.primary&&e.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2.5 py-1 rounded-full font-medium",children:"ì£¼ ê²°ì œìˆ˜ë‹¨"})]})}),e.jsx(p,{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[!n.primary&&e.jsx(u,{variant:"outline",size:"sm",onClick:()=>N(n.id),children:"ì£¼ ê²°ì œìˆ˜ë‹¨ìœ¼ë¡œ ì„¤ì •"}),e.jsx(u,{variant:"outline",size:"sm",children:"ìˆ˜ì •"}),e.jsx(u,{variant:"destructive",size:"sm",onClick:()=>x(n.id),children:"ì‚­ì œ"})]})})]},n.id))}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ìƒˆ ê²°ì œìˆ˜ë‹¨ ì¶”ê°€"}),e.jsx(j,{children:"ì¹´ë“œë²ˆí˜¸ ë˜ëŠ” ê³„ì¢Œë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ê²°ì œìˆ˜ë‹¨ ì¢…ë¥˜"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[e.jsx("option",{children:"ì‹ ìš©/ì²´í¬ì¹´ë“œ"}),e.jsx("option",{children:"ê³„ì¢Œ"}),e.jsx("option",{children:"ê°„íŽ¸ê²°ì œ"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ê²°ì œìˆ˜ë‹¨ ì´ë¦„"}),e.jsx(M,{placeholder:"ì˜ˆ: KBêµ­ë¯¼ì¹´ë“œ"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"ì¹´ë“œ/ê³„ì¢Œ ë²ˆí˜¸"}),e.jsx(M,{placeholder:"1234-5678-9012-3456"})]}),e.jsx(u,{className:"w-full",children:"ì¶”ê°€í•˜ê¸°"})]})]})]})},R=()=>{const[s,t]=l.useState(""),[a,r]=l.useState("all"),[c,m]=l.useState([]),[d,v]=l.useState(!0);l.useEffect(()=>{N()},[]);const N=async()=>{try{const i=await w.getTransactions();m(i),i.length===0&&await x()}catch(i){console.error("Failed to load transactions:",i)}finally{v(!1)}},x=async()=>{const i=[{store:"Coupang",amount:45900,date:"2025-10-12 14:30",paymentMethod:"KBêµ­ë¯¼ì¹´ë“œ",savings:2300,status:"completed",category:"ì‡¼í•‘"},{store:"Naver Pay",amount:12e3,date:"2025-10-11 18:45",paymentMethod:"Toss Money",savings:600,status:"completed",category:"ìŒì‹"},{store:"Gë§ˆì¼“",amount:88500,date:"2025-10-10 10:20",paymentMethod:"KBêµ­ë¯¼ì¹´ë“œ",savings:4400,status:"completed",category:"ê°€ì „"},{store:"SSG.com",amount:34200,date:"2025-10-09 16:15",paymentMethod:"ì‹ í•œì¹´ë“œ",savings:1700,status:"pending",category:"ì‹í’ˆ"},{store:"Auction",amount:156e3,date:"2025-10-08 09:30",paymentMethod:"KBêµ­ë¯¼ì¹´ë“œ",savings:7800,status:"completed",category:"ê°€êµ¬"},{store:"11ë²ˆê°€",amount:23400,date:"2025-10-07 13:40",paymentMethod:"Toss Money",savings:1200,status:"failed",category:"ì˜ë¥˜"},{store:"Kakao Shopping",amount:67800,date:"2025-10-06 11:25",paymentMethod:"ìš°ë¦¬ì€í–‰",savings:3400,status:"completed",category:"ë„ì„œ"}];for(const k of i)await w.addTransaction(k);await N()},n=c.filter(i=>{const k=i.store.toLowerCase().includes(s.toLowerCase())||i.paymentMethod.toLowerCase().includes(s.toLowerCase()),L=a==="all"||i.status===a;return k&&L}),y=i=>{switch(i){case"completed":return e.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded-full",children:"ì™„ë£Œ"});case"pending":return e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 px-2 py-1 rounded-full",children:"ëŒ€ê¸°ì¤‘"});case"failed":return e.jsx("span",{className:"text-xs bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 px-2 py-1 rounded-full",children:"ì‹¤íŒ¨"})}},o=n.reduce((i,k)=>i+k.savings,0),b=n.reduce((i,k)=>i+k.amount,0);return d?e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"ê±°ëž˜ ë‚´ì—­"}),e.jsx("p",{className:"text-muted-foreground",children:"ì „ì²´ ê±°ëž˜ ë‚´ì—­ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(h,{children:e.jsxs(f,{className:"pb-2",children:[e.jsx(j,{children:"ì´ ê±°ëž˜ ê¸ˆì•¡"}),e.jsxs(g,{className:"text-2xl",children:["â‚©",b.toLocaleString()]})]})}),e.jsx(h,{children:e.jsxs(f,{className:"pb-2",children:[e.jsx(j,{children:"ì´ ì ˆì•½ ê¸ˆì•¡"}),e.jsxs(g,{className:"text-2xl text-green-600",children:["â‚©",o.toLocaleString()]})]})}),e.jsx(h,{children:e.jsxs(f,{className:"pb-2",children:[e.jsx(j,{children:"ê±°ëž˜ ê±´ìˆ˜"}),e.jsxs(g,{className:"text-2xl",children:[n.length,"ê±´"]})]})})]}),e.jsx(h,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx(M,{placeholder:"ê°€ë§¹ì  ë˜ëŠ” ê²°ì œìˆ˜ë‹¨ ê²€ìƒ‰...",value:s,onChange:i=>t(i.target.value)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:a==="all"?"default":"outline",size:"sm",onClick:()=>r("all"),children:"ì „ì²´"}),e.jsx(u,{variant:a==="completed"?"default":"outline",size:"sm",onClick:()=>r("completed"),children:"ì™„ë£Œ"}),e.jsx(u,{variant:a==="pending"?"default":"outline",size:"sm",onClick:()=>r("pending"),children:"ëŒ€ê¸°"}),e.jsx(u,{variant:a==="failed"?"default":"outline",size:"sm",onClick:()=>r("failed"),children:"ì‹¤íŒ¨"})]})]})})}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ê±°ëž˜ ëª©ë¡"}),e.jsxs(j,{children:[n.length,"ê±´ì˜ ê±°ëž˜"]})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-3",children:n.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:i.store}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.date})]}),y(i.status)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-xs bg-accent px-2 py-1 rounded",children:i.category}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",i.paymentMethod]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"font-bold text-lg",children:["â‚©",i.amount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-green-600",children:["ì ˆì•½ â‚©",i.savings.toLocaleString()]})]})]},i.id))})})]})]})},F=()=>{const[s,t]=l.useState({theme:"system",language:"ko",notifications:!0,autoDetect:!0,savingsAlerts:!0,dataSync:!1}),[a,r]=l.useState(!0);l.useEffect(()=>{c()},[]);const c=async()=>{try{const d=await w.getSettings();t(d)}catch(d){console.error("Failed to load settings:",d)}finally{r(!1)}},m=async(d,v)=>{const N={...s,[d]:v};t(N);try{await w.setSettings({[d]:v})}catch(x){console.error("Failed to save setting:",x),t(s)}};return a?e.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"ì„¤ì •"}),e.jsx("p",{className:"text-muted-foreground",children:"PicSel í™•ìž¥ í”„ë¡œê·¸ëž¨ ì„¤ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”"})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ëª¨ì–‘"}),e.jsx(j,{children:"í…Œë§ˆ ë° í‘œì‹œ ì„¤ì •"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ë‹¤í¬ ëª¨ë“œ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ì–´ë‘ìš´ í…Œë§ˆ ì‚¬ìš©"})]}),e.jsx(E,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ì–¸ì–´"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ì¸í„°íŽ˜ì´ìŠ¤ ì–¸ì–´ ì„¤ì •"})]}),e.jsxs("select",{className:"flex h-9 rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",value:s.language,onChange:d=>m("language",d.target.value),children:[e.jsx("option",{value:"ko",children:"í•œêµ­ì–´"}),e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ja",children:"æ—¥æœ¬èªž"})]})]})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ì•Œë¦¼"}),e.jsx(j,{children:"ì•Œë¦¼ ë° ë©”ì‹œì§€ ì„¤ì •"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ì•Œë¦¼ í™œì„±í™”"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ë¸Œë¼ìš°ì € ì•Œë¦¼ ìˆ˜ì‹ "})]}),e.jsx("button",{onClick:()=>m("notifications",!s.notifications),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.notifications?"bg-primary":"bg-input"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-background transition-transform ${s.notifications?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ì ˆì•½ ì•Œë¦¼"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ì ˆì•½ ê¸ˆì•¡ì´ ë°œìƒí•˜ë©´ ì•Œë¦¼"})]}),e.jsx("button",{onClick:()=>m("savingsAlerts",!s.savingsAlerts),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.savingsAlerts?"bg-primary":"bg-input"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-background transition-transform ${s.savingsAlerts?"translate-x-6":"translate-x-1"}`})})]})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ê²°ì œ ê°ì§€"}),e.jsx(j,{children:"ê²°ì œ íŽ˜ì´ì§€ ìžë™ ê°ì§€ ì„¤ì •"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"ìžë™ ê°ì§€"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ê²°ì œ íŽ˜ì´ì§€ ìžë™ìœ¼ë¡œ ì¸ì‹"})]}),e.jsx("button",{onClick:()=>m("autoDetect",!s.autoDetect),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.autoDetect?"bg-primary":"bg-input"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-background transition-transform ${s.autoDetect?"translate-x-6":"translate-x-1"}`})})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"ìžë™ ê°ì§€ê°€ í™œì„±í™”ë˜ë©´ ì‡¼í•‘ëª° ê²°ì œ íŽ˜ì´ì§€ë¥¼ ìžë™ìœ¼ë¡œ ì¸ì‹í•˜ì—¬ ìµœì ì˜ ê²°ì œ ìˆ˜ë‹¨ì„ ì¶”ì²œí•©ë‹ˆë‹¤."})})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ë°ì´í„° ë° ê°œì¸ì •ë³´"}),e.jsx(j,{children:"ë°ì´í„° ë™ê¸°í™” ë° ê°œì¸ì •ë³´ ì„¤ì •"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"í´ë¼ìš°ë“œ ë™ê¸°í™”"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ì—¬ëŸ¬ ê¸°ê¸°ì—ì„œ ë°ì´í„° ê³µìœ "})]}),e.jsx("button",{onClick:()=>m("dataSync",!s.dataSync),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.dataSync?"bg-primary":"bg-input"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-background transition-transform ${s.dataSync?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{variant:"outline",className:"w-full justify-start",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"ë°ì´í„° ë‚´ë³´ë‚´ê¸°"]}),e.jsxs(u,{variant:"outline",className:"w-full justify-start",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"]}),e.jsxs(u,{variant:"destructive",className:"w-full justify-start",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"ëª¨ë“  ë°ì´í„° ì‚­ì œ"]})]})]})]}),e.jsxs(h,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"ì •ë³´"}),e.jsx(j,{children:"í™•ìž¥ í”„ë¡œê·¸ëž¨ ì •ë³´"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ë²„ì „"}),e.jsx("span",{className:"text-sm font-medium",children:"1.0.0"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"ë¼ì´ì„ ìŠ¤"}),e.jsx("span",{className:"text-sm font-medium",children:"MIT"})]}),e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsxs(u,{variant:"outline",className:"w-full justify-start",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ë„ì›€ë§ ë° ì§€ì›"]}),e.jsxs(u,{variant:"outline",className:"w-full justify-start",children:[e.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨"]})]})]})]})]})},W=({currentPage:s,onNavigate:t})=>{const a=[{id:"dashboard",label:"ëŒ€ì‹œë³´ë“œ",icon:"ðŸ "},{id:"payment-methods",label:"ê²°ì œìˆ˜ë‹¨",icon:"ðŸ’³"},{id:"transactions",label:"ê±°ëž˜ë‚´ì—­",icon:"ðŸ“Š"},{id:"settings",label:"ì„¤ì •",icon:"âš™ï¸"}];return e.jsx("nav",{className:"border-b bg-background",children:e.jsx("div",{className:"flex space-x-1 p-2",children:a.map(r=>e.jsxs("button",{onClick:()=>t(r.id),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${s===r.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[e.jsx("span",{children:r.icon}),e.jsx("span",{children:r.label})]},r.id))})})};function H(){const[s,t]=l.useState("dashboard");l.useEffect(()=>{D.info("Popup opened",{page:s})},[s]);const a=()=>{switch(s){case"dashboard":return e.jsx(S,{});case"payment-methods":return e.jsx(z,{});case"transactions":return e.jsx(R,{});case"settings":return e.jsx(F,{});default:return e.jsx(S,{})}};return e.jsxs("div",{className:"w-[380px] h-[600px] flex flex-col bg-background overflow-hidden",children:[e.jsx("header",{className:"border-b flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{variant:"accent"}),e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"PicSel"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"v1.0.0"})]})}),e.jsx(W,{currentPage:s,onNavigate:t}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:a()})]})}P.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(H,{})}));
